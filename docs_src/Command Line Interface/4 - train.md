# Train

![cli_train](../static/op_graphic_train.png)

## Train help dialog

```shell
$: beep train --help

Usage: beep train [OPTIONS]

  Train a machine learning model using all available data and save it to file.

Options:
  -o, --output-filename FILE      Filename (json) to write the BEEP linear
                                  model object to when training is finished.
  -fm, --feature-matrix-file FILE
                                  Featurization matrix serialized to file,
                                  containing features (X) for learning.
                                  Featurization matrices can be generated by
                                  the beep featurize command.  [required]
  -tm, --target-matrix-file FILE  Featurization matrix serialized to file,
                                  containing targets (one y or more) for
                                  learning. Featurization matrices can be
                                  generated by the beep featurize command.
                                  [required]
  -t, --targets TEXT              Target columns to as from target matrix
                                  file. Must all be present in the target
                                  matrix file. If more than 1 is specified
                                  (e.g., -t 'col1' -t 'col2'), multitask
                                  regression will be performed. Column names
                                  will be '<Feature Name>::<Featurizer Class
                                  Name>' if --homogenize-features is set. If
                                  not, column names include long parameter
                                  hashes which must be included in this
                                  argument option.  [required]
  -m, --model-name TEXT           Name of the regularized linear model to use.
                                  Current selection includes ('elasticnet',
                                  'ridge', 'lasso').  [required]
  -s, --train-on-frac-and-score FLOAT
                                  Do hyperparameter tuning on part (a training
                                  fraction) of the dataset and use that fitted
                                  model to predict on a testing fraction of
                                  the dataset. Specify the training fraction
                                  as a float 0-1.
  -al, --alpha-lower FLOAT        Lower bound on the grid for the alpha
                                  hyperparameter  which will be explored
                                  during hyperparameter tuning. Must be
                                  specified with --alpha-upper and --n-alphas.
  -au, --alpha-upper FLOAT        Upper bound on the grid for the alpha
                                  hyperparameter  which will be explored
                                  during hyperparameter tuning. Must be
                                  specified with --alpha-lower and --n-alphas.
  -an, --n-alphas FLOAT           Number of linearly spaced alphas to explore
                                  during hyperparameter tuning. If not
                                  specified, sklearn defaults are used. Must
                                  be specified with --alpha-upper and --alpha-
                                  lower.
  --train-feature-nan-thresh FLOAT
                                  Threshold to keep a feature in the training
                                  dataset, in fraction of samples which must
                                  not be nan from 0-1. 0 = any feature having
                                  any nan is dropped, 1 = no features are
                                  dropped.
  --train-sample-nan-thresh FLOAT
                                  Threshold to keep a sample from the training
                                  data, in fraction of features which must not
                                  be nan from 0-1. 0 = any sample having any
                                  nan feature is dropped, 1 = no samples are
                                  dropped.
  --predict-sample-nan-thresh FLOAT
                                  Threshold to keep a sample from any
                                  prediction set, including those used
                                  internally, in fraction of features which
                                  must notbe nan.
  --drop-nan-training-targets     Drop samples containing any nan targets. If
                                  False and the targets matrix has nan
                                  targets, the command will fail.
  --impute-strategy TEXT          Type of imputation to use, 'median', 'mean',
                                  or 'none'.
  --kfold INTEGER                 Number of folds to use in k-fold
                                  hyperparameter tuning.
  --max-iter INTEGER              Number of iterations during training to fit
                                  linear parameters.
  --tol FLOAT                     Tolerance for optimization.
  --l1-ratios TEXT                Comma separated l1 ratios to try in
                                  hyperparameter optimization.For example,
                                  '0.1,0.5,0.7,0.9,0.95,1.0', and all values
                                  must be between 0-1.
  --homogenize-features BOOLEAN   Shorten feature names to only include the
                                  featurizer name and (very short) feature
                                  name. For example,
                                  'capacity_0.8::TrajectoryFastCharge', where
                                  features normally have names including their
                                  (long) parameter hashes. To use the literal
                                  feature names, specify False.
  --help                          Show this message and exit.

```